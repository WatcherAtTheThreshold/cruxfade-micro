<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cruxfade-Micro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main game container with 3:2 aspect ratio and letterboxing -->
    <div class="wrap">
        
        <!-- SECTION 1: EXPLORATION GRID (Top Left) -->
        <section class="exploration-area">
            <div class="grid-header">
                <h2>Grid Level <span id="grid-level">1</span></h2>
                <div class="grid-stats">
                    <span class="chip">
                        <strong id="keys-found">0</strong> Keys
                    </span>
                </div>
            </div>
            
            <!-- 3x3 Game Board -->
            <div class="board" id="game-board">
                <!-- Tiles generated by JS -->
                <div class="tile" data-row="0" data-col="0"></div>
                <div class="tile" data-row="0" data-col="1"></div>
                <div class="tile" data-row="0" data-col="2"></div>
                <div class="tile" data-row="1" data-col="0"></div>
                <div class="tile player-tile" data-row="1" data-col="1"></div> <!-- Start position -->
                <div class="tile" data-row="1" data-col="2"></div>
                <div class="tile" data-row="2" data-col="0"></div>
                <div class="tile" data-row="2" data-col="1"></div>
                <div class="tile" data-row="2" data-col="2"></div>
            </div>
        </section>

        <!-- SECTION 2: PARTY STATUS (Top Right) -->
        <section class="party-status">
            <div class="status-header">
                <h2>Party Status</h2>
                <div class="run-info">
                    <span class="chip">
                        Seed: <strong id="run-seed">12345</strong>
                    </span>
                </div>
            </div>
            
            <!-- Party Member Stats -->
            <div class="party-stats" id="party-stats">
                <!-- Generated by JS -->
                <div class="party-member">
                    <div class="member-portrait">
                        <img src="/img/portraits/player.png" alt="You" onerror="this.style.display='none'">
                        <span class="portrait-fallback">⚔️</span>
                    </div>
                    <div class="member-info">
                        <strong>You</strong>
                        <div class="stats">
                            <span class="hp">❤️ <strong>10</strong></span>
                            <span class="atk">⚔️ <strong>2</strong></span>
                            <span class="mag">✨ <strong>1</strong></span>
                        </div>
                    </div>
                    <div class="leader-marker">LEADER</div>
                </div>
            </div>

            <!-- Game Log -->
            <div class="log-area">
                <h3>Event Log</h3>
                <div class="log" id="game-log">
                    <p>Welcome to the grid. Find the key to proceed...</p>
                </div>
            </div>
        </section>

        <!-- SECTION 3: PARTY CARDS (Bottom Left) -->
        <section class="party-cards">
            <div class="cards-header">
                <h2>Party Hand</h2>
                <div class="deck-info">
                    <span class="chip">
                        Deck: <strong id="deck-count">8</strong>
                    </span>
                    <span class="chip">
                        Hand: <strong id="hand-count">5</strong>
                    </span>
                </div>
            </div>
            
            <!-- Overlapping Party Cards Display -->
            <div class="party-hand" id="party-hand">
                <!-- Generated by JS - cards overlap with leader elevated -->
                <div class="party-card leader">
                    <div class="card-portrait">⚔️</div>
                    <div class="card-content">
                        <h4>You</h4>
                        <div class="card-skills">
                            <span class="skill">Basic Strike</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: ENCOUNTERS (Bottom Right) -->
        <section class="encounters">
            <div class="encounter-header">
                <h2>Current Encounter</h2>
            </div>
            
            <!-- Encounter Content Area -->
            <div class="encounter-content" id="encounter-area">
                <div class="encounter-placeholder">
                    <p>Move to a tile to begin an encounter...</p>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="encounter-actions" id="encounter-actions">
                <button class="btn-primary" disabled>Waiting...</button>
            </div>
        </section>

    </div>

    <!-- Overlay System for Dice, Combat, etc. -->
    <div class="overlay-system" id="overlay-system">
        <!-- Dice Roll Overlay -->
        <div class="overlay dice-overlay" id="dice-overlay">
            <div class="overlay-content">
                <h3>Rolling...</h3>
                <div class="dice-display" id="dice-display">
                    <div class="die">?</div>
                </div>
                <p id="dice-result">Click to roll!</p>
            </div>
        </div>

        <!-- Combat Overlay -->
        <div class="overlay combat-overlay" id="combat-overlay">
            <div class="overlay-content">
                <h3 id="combat-title">Combat</h3>
                <div class="combat-participants">
                    <div class="participant player">
                        <strong id="player-name">You</strong>
                        <div class="participant-hp">❤️ <span id="player-hp">10</span></div>
                    </div>
                    <div class="vs">VS</div>
                    <div class="participant enemy">
                        <strong id="enemy-name">Goblin</strong>
                        <div class="participant-hp">❤️ <span id="enemy-hp">4</span></div>
                    </div>
                </div>
                <div class="combat-actions">
                    <button class="btn-primary" id="attack-btn">Attack</button>
                    <button class="btn-secondary" id="defend-btn">Defend</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load main game script as ES module -->
    <script type="module" src="./js/main.js"></script>
</body>
</html>
